# 🎨 アイロンビーズ図案提案アプリ 要件定義書

## ✅ 概要

このWebアプリケーションは、ユーザーが指定したビーズの色数に応じて、作成可能なアイロンビーズ図案を複数提案し、選択した図案をモーダルで詳細表示するサービスです。

---

## 🧩 仕様

* **ビーズの色数**：最大10色（固定）
* **図案サイズ**：最大16 × 16（256マス）
* **入力**：色別の所持ビーズ数
* **出力**：条件を満たす図案（最大4件）
* **図案の選択とモーダル詳細表示**に対応

---

## 🖼 作成する画面

| 画面名      | 説明                       |
| -------- | ------------------------ |
| ビーズ数入力画面 | ユーザーが色別のビーズ所持数を入力する（トリプル入力システム：ステッパー + スライダー + 数値入力） |
| 図案選択画面   | 提案された図案から1つを選択し、モーダルで詳細表示 |
| 図案詳細モーダル | 選択された図案を16×16のグリッドで表示（モーダル形式） |

---

## 🎛️ UI機能詳細

### ビーズ数入力画面
* **トリプル入力システム**：ステッパー（+/-ボタン）、スライダー、数値入力欄の3つの方法で入力可能
* **入力範囲**：各色0〜256個（16×16の全マス分）
* **三方向同期**：どの入力方法を使っても即座に他の表示も更新
* **10色対応**：赤、オレンジ、黄、緑、青、紫、黒、白、ピンク、茶

### 図案選択画面
* **図案表示**：最大4件の図案を2×2グリッドで表示
* **選択システム**：図案クリック → 選択状態表示 → 詳細表示ボタン
* **モーダル表示**：詳細表示ボタンで図案詳細モーダルを開く

### 図案詳細モーダル
* **グリッド表示**：16×16のフルサイズグリッドで図案を表示
* **必要ビーズ数表示**：実際に必要な色別ビーズ数を表示
* **ナビゲーション**：閉じるボタン、ホームボタンで柔軟な画面遷移

---

## 🛠 技術スタック

| 種類      | 技術          |
| ------- | ----------- |
| フロントエンド | **Next.js** |
| バックエンド  | **Flask**   |
| データベース  | **MySQL**   |

---

## 🔗 API設計（GETエンドポイント1本のみ）

### `GET /api/suggestions`

#### 📌 概要

ユーザーが所持している色別ビーズ数をクエリパラメータで渡すと、条件に一致する図案を最大4件返却する。

#### 📥 クエリパラメータ

* 色名（10色）とそれぞれの所持数を指定
* 任意の組み合わせで指定可能

例：

```
/api/suggestions?white=10&dark=5&pink=3&red=8&orange=2&yellow=4&green=6&blue=7&violet=1
```

#### 📤 レスポンス形式（JSON）

```json
[
  {
    "pattern": "wdwdppry...（256文字）",
    "beads": {
      "white": 10,
      "dark": 5,
      "pink": 3,
      "red": 8,
      "orange": 2,
      "yellow": 4,
      "green": 6,
      "blue": 7,
      "violet": 1,
      "maroon": 0
    }
  },
  {
    "pattern": "dppowwgr...（256文字）",
    "beads": {
      "white": 9,
      "dark": 3,
      "pink": 2,
      ...
    }
  }
]
```

* `pattern`：16×16＝256マスの図案を1文字ずつ並べた文字列
* `beads`：図案内で実際に使用されている色とその数

#### 🔎 処理内容（バックエンド）

* `designs` テーブルからすべての図案を取得
* クエリで指定されたビーズ数以下で構成された図案をフィルター
* 上限4件まで返却（ランダムまたはマッチ度順）

---

## 🗃️ データベース設計（MySQL）

### `designs` テーブル

| カラム名    | 型       | 説明                              |
| ------- | ------- | ------------------------------- |
| id      | INT     | 主キー                             |
| title   | VARCHAR | 図案タイトル（任意）                      |
| pattern | TEXT    | 256文字の1次元表現                     |
| beads   | JSON    | 色ごとの使用数（例：`{"white": 12, ...}`） |
