# 🎨 アイロンビーズ図案提案アプリ 要件定義書

## ✅ 概要

このWebアプリケーションは、ユーザーが指定したビーズの色数に応じて、作成可能なアイロンビーズ図案を複数提案し、最終的にユーザーが選んだ図案を全画面表示するサービスです。

---

## 🧩 仕様

* **ビーズの色数**：最大10色（固定）
* **図案サイズ**：最大16 × 16（256マス）
* **入力**：色別の所持ビーズ数
* **出力**：条件を満たす図案（最大4件）
* **図案の選択と全画面表示**に対応

---

## 🖼 作成する画面

| 画面名      | 説明                       |
| -------- | ------------------------ |
| ビーズ数入力画面 | ユーザーが色別のビーズ所持数を入力する      |
| 図案選択画面   | 提案された図案から1つを選ぶ           |
| 図案表示画面   | 選択された図案を16×16のグリッドで全画面表示 |

---

## 🛠 技術スタック

| 種類      | 技術          |
| ------- | ----------- |
| フロントエンド | **Next.js** |
| バックエンド  | **Flask**   |
| データベース  | **MySQL**   |

---

## 🔗 API設計（GETエンドポイント1本のみ）

### `GET /api/suggestions`

#### 📌 概要

ユーザーが所持している色別ビーズ数をクエリパラメータで渡すと、条件に一致する図案を最大4件返却する。

#### 📥 クエリパラメータ

* 色名（10色）とそれぞれの所持数を指定
* 任意の組み合わせで指定可能

例：

```
/api/suggestions?white=10&dark=5&pink=3&red=8&orange=2&yellow=4&green=6&blue=7&violet=1
```

#### 📤 レスポンス形式（JSON）

```json
[
  {
    "pattern": "wdwdppry...（256文字）",
    "beads": {
      "white": 10,
      "dark": 5,
      "pink": 3,
      "red": 8,
      "orange": 2,
      "yellow": 4,
      "green": 6,
      "blue": 7,
      "violet": 1
    }
  },
  {
    "pattern": "dppowwgr...（256文字）",
    "beads": {
      "white": 9,
      "dark": 3,
      "pink": 2,
      ...
    }
  }
]
```

* `pattern`：16×16＝256マスの図案を1文字ずつ並べた文字列
* `beads`：図案内で実際に使用されている色とその数
* 色は以下の略称（例：`w=white`, `d=dark`, `p=pink`, など）を用いる想定（変換表は別途管理）

#### 🔎 処理内容（バックエンド）

* `designs` テーブルからすべての図案を取得
* クエリで指定されたビーズ数以下で構成された図案をフィルター
* 上限4件まで返却（ランダムまたはマッチ度順）

---

## 🗃️ データベース設計（MySQL）

### `designs` テーブル

| カラム名    | 型       | 説明                              |
| ------- | ------- | ------------------------------- |
| id      | INT     | 主キー                             |
| title   | VARCHAR | 図案タイトル（任意）                      |
| pattern | TEXT    | 256文字の1次元表現                     |
| beads   | JSON    | 色ごとの使用数（例：`{"white": 12, ...}`） |
